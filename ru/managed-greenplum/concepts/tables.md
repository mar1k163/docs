# Типы хранения данных в {{ GP }}

{{ GP }} позволяет использовать два [типа хранения данных в таблицах]({{ gp.docs.pivotal }}/6-16/admin_guide/ddl/ddl-storage.html):

* _Без кластеризованных индексов_ (heap storage).

    Таблицы такого типа обеспечивают только _строковое_ хранение данных. Они подходят для обработки транзакций в реальном времени ([OLTP](../../glossary/oltp.md)), когда данные в таблицах часто обновляются операциями `INSERT`, `UPDATE` и `DELETE`.

    Все таблицы, создаваемые в {{ GP }}, по умолчанию используют этот тип хранения данных.

* _Оптимизированное для добавления_ (append-optimized storage).

    Таблицы такого типа обеспечивают _строковое_ и _колоночное_ хранение. Таблицы для строкового хранения сокращенно называют AO-таблицами (append-optimized), а колоночного — AOCO-таблицами (append-optimized column-oriented). Оба вида таблиц реализованы на основе вспомогательных heap-таблиц. Данные в таблицах AO и AOCO хранятся в сегментных файлах, которые состоят из блоков произвольного объема.

    Таблицы AO и AOCO подходят для [аналитической обработки](../../glossary/data-analytics.md) больших массивов данных ([OLAP](../../glossary/olap.md)), когда данные загружаются большими пакетами и над ними производятся в основном операции чтения.

    Колоночное хранение данных значительно снижает затраты на чтение и запись, когда запрос обращается только к небольшому количеству столбцов из множества всех полей таблицы. Колоночные таблицы также лучше поддаются сжатию. При использовании {{ GP }} в качестве аналитической СУБД рекомендуется использовать колоночные таблицы со стандартным сжатием первого уровня.

    Для таблиц AO и AOCO {{ yandex-cloud }} разработал расширение {{ YZ }}, которое позволяет выгрузить данные с дисков кластера {{ mgp-name }} в холодное хранилище {{ objstorage-full-name }}. Данные надежно хранятся в служебном бакете. Подробнее о работе с холодным хранилищем см. в руководстве [{#T}](../tutorials/yezzey.md).

## Создание колоночных таблиц {#create-columnar-table}

Для создания колоночной таблицы со сжатием передайте параметры, отвечающие за требуемые настройки, в команде `CREATE TABLE`:

```sql
CREATE TABLE tableName (...)
WITH (
    appendonly = true,
    orientation = column,
    compresstype = zstd,
    compresslevel = 1
);
```

{% include [greenplum-trademark](../../_includes/mdb/mgp/trademark.md) %}
